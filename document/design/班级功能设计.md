# 班级和预约的设计

- 班级来源于course,只能由管理员创建

- 班级有两种，一种是自动刷新的每周都有一次的日常班级，另一种是上一次就没了的一次性班级

- 班级只有两种状态：false  waiting 等待激活，true actived 等待开课，管理员创建了一个班级之后就是等待激活状态，管理员激活之后就是等待开课状态，这个时候就可以约课，而且也可以签到和老师消签，上课完成了这个课如果是日常班级，则继续保持等待上课状态，如果是一次性班级，则进入等待激活状态

- 班级有三种存在方式，一为存在数据库中，主要有基本信息，什么时候开始，什么时候结束，一旦管理员调用了激活接口，则激活状态改为激活。一种是存在于内存中，这里只每天晚上24点刷新并存储今天将要上的课程，即找到激活状态而且今天开的课程，在刷新的时候首先的操作是将所有上完的课保存在记录中，然后再找到第二天的课程，还有一种就是记录，每次课程上完都会有一次记录
  
  ------
  
  这个模块和预约模块是紧密联系的，不能割裂开设计，这里需要同时设计班级和预约
  
  -----
  
  # 预约模块

- 预约也是最好跑在内存中的，用户通过检索到内存中的将要开课的课程信息之后，就可以去预约了
  
  ### 有以下问题
  
  1. 预约内容需要持久化吗？我的想法是绝对需要，因为版本更新不可能等到过年再来吧？而且需求层面，续约也并不是很需要速度，数据库的速度完全可以胜任，目前最好的办法也是，内存中存储基本信息，即为userId,classId,classStartAt.而数据库中存储详细的信息，作为预约记录表。
  
  2. 如何版本更新的时候内存中的数据丢失了再弄回来？这里需要设置一个重新启动装置，专门在重新启动的时候把数据从记录表中弄回来，也就是说记录表中要有预约的状态
     
     -----

- 预约的状态有以下几种，0 waiting,1 successed,2 failed,3 canceled

- 预约应该有一个表，也就是禁止约课表，用内存存储，我不打算严格执行黑名单，这个可以比较随意。
  
  ----
  
  ## 场景驱动
  
  1. 管理员在electron上新增一个班级
  
  2. 管理员查看所有班级，并选择激活一个班级
  
  3. 内存中对今日已经激活的班级添加内存中的快速表
  
  4. 所有人都可以查看所有的班级的信息
  
  5. 学生尝试进行预约操作
  
  6. 内存中刷新和新增预约列表
  
  7. 老师查看自己的班级有哪些人预约了
  
  8. 查看用户查看自己预约的情况
  
  9. 由老师对某个学生核对签到
  
  10. 由老师对某个学生取消签到
